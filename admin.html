<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <script src="login.js"></script>
  <script>
    requireLogin(); // Redirect if not logged in
  </script>

  <header>
    <h1>Admin Panel</h1>
  </header>

  <nav>
    <a href="index.html">Home</a>
    <a href="report.html">Report Problem</a>
    <a href="guide.html">Waste Guide</a>
    <button onclick="logoutAdmin()">Logout</button>
  </nav>

  <div class="container">
    <h2>Update Announcement</h2>
    <input type="text" id="adminAnnouncement" placeholder="Enter new announcement">
    <button onclick="updateAnnouncement()">Update Announcement</button>

    <h2>Update Collector Status</h2>
    <select id="adminStatus">
      <option value="Not Yet Arrived">Not Yet Arrived</option>
      <option value="Collecting">Collecting</option>
      <option value="Done">Done</option>
    </select>
    <button onclick="updateStatus()">Update Status</button>

    <h2>Submitted Reports</h2>
    <div id="reportsContainer"></div>
  </div>

  <script src="script.js"></script>
  <script>
    // Load reports in admin panel
    function loadReports() {
      const container = document.getElementById("reportsContainer");
      container.innerHTML = "";
      let reports = JSON.parse(localStorage.getItem("reports") || "[]");
      if(reports.length === 0){
        container.innerHTML = "<p>No reports submitted yet.</p>";
        return;
      }
      reports.forEach((r, i) => {
        const div = document.createElement("div");
        div.className = "status-box";
        div.innerHTML = `<strong>${i+1}. ${r.problem}</strong><br>
                         Name: ${r.name}<br>
                         Location: ${r.location}<br>
                         Description: ${r.description || '-'}<br>
                         Time: ${r.time}`;
        container.appendChild(div);
      });
    }

    loadReports();
  </script>
</body>
</html>